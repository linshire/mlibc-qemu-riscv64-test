{
    "version": "0.2.0",
    "configurations": [

        {
            "name": "qemu-riscv64",
            "type": "cppdbg",
            "request": "launch",
            "cwd": "${workspaceRoot}",
            "stopAtEntry": true,
            "args": [],
            "MIMode": "gdb",
            "program": "${workspaceFolder}/rtthread.elf",
            "miDebuggerPath": "/home/linshire/toolchains/riscv64-unknown-elf-toolchain-10.2.0-2020.12.8-x86_64-linux-ubuntu14/bin/riscv64-unknown-elf-gdb",
            "valuesFormatting": "parseText",
            "miDebuggerServerAddress": "localhost:1234",
            "setupCommands": [
                {
                  "text":   "shell qemu-system-riscv64 -nographic -machine virt -m 256M -kernel rtthread.bin -s -S -drive if=none,file=sd.bin,format=raw,id=blk0 -device virtio-blk-device,drive=blk0,bus=virtio-mmio-bus.0 
                            -netdev user,id=tap0 -device virtio-net-device,netdev=tap0,bus=virtio-mmio-bus.1 
                            -device virtio-serial-device -chardev socket,host=127.0.0.1,port=4321,server=on,wait=off,telnet=on,id=console0 -device virtserialport,chardev=console0"
                },
                    // {
                    //     "text": "shell"
                    // },
                    // {
                    //     "text": "cd ${workspaceRoot}"
                    // },
                    // {
                    //     "text": "./qemu-dbg.sh"
                    // },
                    // {
                    //     "text": "exit"
                    // },
                ]
        },
        {
            "name": "Debug @Linux",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceRoot}/rtthread.elf",
            "args": [],
            "stopAtEntry": true,
            "cwd": "${workspaceRoot}",
            "environment": [],
            "externalConsole": true,
            "miDebuggerServerAddress": "localhost:1234",
            "serverLaunchTimeout": 2000,
            //"targetArchitecture": "riscv",
            "setupCommands": [
                {
                    "text": "cd ${workspaceRoot}"
                },
                {
                    "text": "shell qemu-dbg.sh"
                },
                {
                    "text": "target remote localhost:1234"
                },
                {
                    "text": "file rtthread.elf"
                },
                {
                    "text": "break application_start"
                }
            ],
            "customLaunchSetupCommands": [],
            //"launchCompleteCommand": "exec-run",
                "MIMode": "gdb",
                "miDebuggerPath": "/home/linshire/toolchains/riscv64-unknown-elf-toolchain-10.2.0-2020.12.8-x86_64-linux-ubuntu14/bin/riscv64-unknown-elf-gdb"
        }

    ]
}
